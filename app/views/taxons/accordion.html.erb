<% content_for :page_class, "taxon-page taxon-page--accordion" %>
<%=
  render(
    partial: 'common',
    locals: {
      presented_taxon: presented_taxon
    }
  )
%>

<div class="grid-row">
  <div class="column-two-thirds">
    <%= render partial: 'high-volume', locals: { presented_taxon: presented_taxon } %>
  </div>
</div>

<% if presented_taxon.accordion_content.present? %>
  <div class="grid-row child-topic-contents">
    <div class="column-two-thirds">
      <div class="topic-content">

        <%= render 'components/accordion', sections: presented_taxon.accordion_content do |(section, index)| %>

          <% if section[:taxon].can_subscribe? %>
            <%= render partial: 'email_alerts', locals: { presented_taxon: section[:taxon] } %>
          <% end %>

          <%= render 'components/taxon-list', {
            heading_level: 'h3',
            items: taxon_list_params(section[:taxon], data_options_type: :options_for_accordion_content, section_index: index)
          } %>

        <% end %>

      </div>
    </div>
  </div>
<% end %>
